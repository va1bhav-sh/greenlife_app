{% extends "base.html" %}
{% block title %}Rider Dashboard â€” GreenLife{% endblock %}

{% block content %}
<h3 class="mb-4">ðŸš´ Rider Dashboard</h3>

<div class="row">
  <div class="col-md-6">
    <h5>Available Pickups</h5>
    {% if requested %}
      {% for p in requested %}
      <div class="card mb-3 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div>
              <strong>#{{ p.id }}</strong> â€” {{ p.item_type }} (Qty: {{ p.quantity }})
              <div class="small text-muted">{{ p.address }}</div>
              <div class="small text-muted">
                Time: {{ p.preferred_date or 'Any Date' }} {{ p.preferred_time or '' }}
              </div>
              <div class="small text-muted">Requested: {{ p.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
            </div>
            <div class="d-flex flex-column gap-2">
              <form method="post" action="{{ url_for('rider_accept', pickup_id=p.id) }}">
                <button class="btn btn-sm btn-primary" type="submit">Accept</button>
              </form>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    {% else %}
      <p class="text-muted">No new pickups available right now.</p>
    {% endif %}
  </div>

  <div class="col-md-6">
    <h5>My Assigned Pickups</h5>
    {% if assigned %}
      {% for p in assigned %}
      <div class="card mb-3 shadow-sm border-success">
        <div class="card-body">
          <div class="d-flex justify-content-between">
            <div>
              <strong>#{{ p.id }}</strong> â€” {{ p.item_type }} (Qty: {{ p.quantity }})
              <div class="small text-muted">{{ p.address }}</div>
              <div class="small text-muted">
                Time: {{ p.preferred_date or 'Any Date' }} {{ p.preferred_time or '' }}
              </div>
            </div>
            <div class="d-flex flex-column gap-2">
              <form method="post" action="{{ url_for('rider_complete', pickup_id=p.id) }}">
                <button class="btn btn-sm btn-success" type="submit">Complete</button>
              </form>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    {% else %}
      <p class="text-muted">You have no assigned pickups.</p>
    {% endif %}
  </div>
</div>
{% endblock %}